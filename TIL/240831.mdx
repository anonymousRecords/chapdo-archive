---
title: '행뚜 : 근무표 기능 구현'
date: '2024-08-31'
description: '살릴 건 살리고, 버릴 건 버리고'
tags: ['table']
---

## 📌 근무표 기능 구현
혼자 해커톤하고 있다. 주말동안 내가 목표한 기능들을 다 끝내고 싶다.
진짜 어찌저찌 근무표 기능은 오늘 구현을 했다.
구현을 하면서 들었던 생각을 적어보자면...

### 리팩토링?
행뚜는 이전에 진행하던 프로젝트이다. 그래서 기존 코드가 존재했는데, 분명 그때는 내가 할 수 있는 최선의 기술로 구현을 했을 것이다. 그런데 지금은 마음에 안 든다.
- 왜 컴포넌트를 직접 구현하는 것을 고집했을까?
- npm을 왜 썼을까?
- 폴더 구조를 왜 이렇게 했을까?

등등 기존의 작업물 위에서 이어서 하려니 그때의 나에게 계속 질문이 생긴다.

왜 그때 그랬는지 이유는 알지만, 이걸 더 좋게 발전시키고 싶으니까 뭔가 발목 잡는 기분이다.

그래서 버릴 건 버리고 유지할 건 하고 그 균형을 잡으려고 하고 있다.
잘못 건들면 기존에 돌아가는 것도 안 돌아가서 그 선을 잘 지켜야 할 거 같다.

### auth
next-auth 쓰고 싶어서 그때 사용했는데, supabse에서 auth 기능을 제공하는데 굳이 next-auth를 사용할 필요는 없을 거 같아서 걷어냈다.
그런데 지금 supabase auth 적용했는데, 뭔가 완벽하게는 안 돌아감.
처음에 로그인은 되는데, 로컬 스토리지에 저장하는 거 보안상 위험할 거 같음. 손 봐야함.

제대로 구현한 건 아니라서, 내일 공식 문서 보면서 다시 해봐야 할 듯

### users table vs user shifts table
행뚜 유저의 경우, 사장님과 아르바이트생이다.
그리고 이 아르바이트생 같은 경우에는 주말 오픈, 평일 마감 등 근무 유형이 존재한다.
그래서 처음에는 users 테이블에 근무 유형을 추가하려고 했다.
그런데 1) 사장님은 근무 유형이 필요없음. 또 2) 아르바이트생이 근무 유형을 바꾸는 것도 빈번하게 존재함. 예를 들어 주말 미들하다가 오픈 중 한 명이 그만둬서 오픈으로 이동.
그래서 users 테이블에 모든 걸 다 넣는게 아니라 이 키 값을 가지고 user shifts table에서 사용하는 것이다.
근데 이거 코드로 데이터 넣는 건 못 하겠어서 supabase 사이트에 직접 수작업으로 하나하나 넣었다.
아직 DB 코드는 익숙하지 않다,,, 공부하자,,,

### 순수한 컴포넌트 vs 살짝 뭐가 섞인 컴포넌트
샌드위치 페이지, 냉판 페이지 등 이미 구현된 페이지들에서 모달 컴포넌트는 사용되고 있었다.
그때는 나름 내가 엄청 고민해서 구현했다.
뭐를 고민했나면 바로 확장 가능성이었다. 

```
interface ModalProps {
  children: React.ReactNode;
  onClose: () => void;
}
```

interface만 봐도 어떤 코드일지 감 잡을 수 있을 거 같아서, 이것만 적어보면
진짜 켜고 닫는 거 하고 나머지는 children으로 둬서 자유롭게 담는 거다.

https://github.com/EO-galaxy/EO-galaxy-FE/issues/3
갑자기 portal도 생각남...

그리고 이번에 dialog를 구현했는데, 뭔가 지금 횡성수설하는데
요지를 정리하자면 같은 기능을 하는 코드를 지금 여러번 구현했다.

> 냉판 페이지 모달
> 네비게이션 dialog
> 근무표 모달

이렇게 세 군데에서 비슷한 기능이 사용되고 있는데, 그 때마다 새로 구현했다.
지금 생각해보니까 내가 개념이 헷갈리는 거 같다.

🤔 **modal vs drawer vs dialog 차이가 뭘까?**

modal
- 전체 화면 또는 그 일부를 덮는 창
- 사용자가 Modal이 열린 상태에서는 다른 작업을 할 수 없으며, Modal 창에서 제공하는 작업을 완료하거나 창을 닫아야만 다른 작업을 이어갈 수 있음

drawer
- https://ui.shadcn.com/docs/components/drawer
- 화면의 한쪽에서 슬라이드하여 나타나는 패널

dialog
- shadcn : https://ui.shadcn.com/docs/components/dialog
- headless ui : https://headlessui.com/react/dialog
- Modal과 비슷한 개념이지만, 일반적으로 더 작은 크기의 창

shadcn에는 modal이 없음.

아무튼 지금 어지럽혀 있는데 이거 정리할 필요가 있다고 봄.

### 폴더 구조
이 프로젝트 만들었을 때 app router 처음 쓰는 거여서, 폴더 구조에 신경을 많이 못 쓴 거 같다.
그래서 api 폴더가 두 개나 존재하고 아무튼 난장판이다.

https://github.com/vercel/commerce
이게 맘에 들어서 이런 식으로 바꾸려고 한다.
폴더명, 파일명 모두 kekbab-case로 변경하고

components도 어떻게 할 지 고민해야 될 듯.
