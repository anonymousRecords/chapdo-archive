---
title: '행뚜 v1.0 메인 기능 구현 및 shader gradient 시작'
date: '2024-09-01'
description: 'framer'
tags: ['shader-gradient', '행뚜']
---

## 📌 행뚜 v1.0 메인 기능 구현
자체 해커톤 2일차 원하는 기능 구현은 그래도 끝냈다.

```
홈 페이지: 네비게이션, 로그인 상태에 따른 UI 변경
근무표 페이지: 근무 일지 기록, 월급 계산
예약 페이지: 빵/케이크 예약 관리 (달력 뷰, 리스트 뷰)
냉판 페이지
샌드위치 페이지
```

### 되돌아 보기
그래도 나름 목표했던 큰 산은 넘었으니, 왜 시작했고 그동안 어떻게 진행했고 한 번 되돌아 보려고 한다.

https://github.com/anonymousRecords/touslesjours-admin
리드미에도 적었다시피, 진짜 내가 아르바이트에서 힘들어서 만든 서비스이다.
아르바이트에 냉판을 닦는 업무가 있다. 나도 아르바이트 하기 전에는 몰랐는데 빵을 굽고 식히기 위해서 냉판에 빵을 옮겨 담는다.
그리고 그 냉판을 모두 아르바이트생이 닦고, 그 위에 종이 등을 까는 작업을 한다.
이게 한 두장도 아니고 수십장을 닦고 종이 깔고 이 작업을 하면 손목이 정말 아프다.
처음에는 괜찮았는데, 당시에 내가 주 7일 근무하면서 일주일 내내 이 작업을 하니까 손목이 아팠다.
이렇게 계속 하다가는 내 손목이 나갈 거 같았다.
그래서 아르바이트를 그만두던가 사장님한테 이야기를 해서 어떻게 해야할지 논의를 하려고 했다.
그 결과 냉판 업무를 누군가가 일임하는 것이 아닌, 아르바이트생끼리 돌아가면서 할 수 있게 신경써주시겠다고 하셨다.
그런데 사장님께서 말씀은 그렇게 해주셨지만, 현실적으로 '여러분 돌아가면서 냉판 업무합시다.'라는 사장님의 말 한 마디로 이 일이 해결될 거라고 보지 않았다.

그래서 그 날 아르바이트 끝나자마자 집에 가서 웹 사이트를 만들었다.
주말 오전 아르바이트생이 3명이어서 보통 냉판 닦는 업무를 2명이면 충분하고 이런 저런 점들을 고려해서 MVP를 만들었다.
쉽게 말해서 냉판 담당자 할당 시스템을 만든거다.
완성하자마자 사장님한테 보내고, 그래도 사장님이 좋으신 분이어서 흔쾌히 받아들여주셨다.

그 이후로 냉판 업무 때문에 아르바이트에서 힘들지 않았다.

그런데 이렇게 하나의 기능 만들어 보니까 욕심이 생겼다.
사람의 취미생활이 여러 유형이 있는데, 몰입하거나 도파민이 뿜어져 나오거나 아니면 생각을 비우거나.
나한테 빵 포장이 정말 취미생활이었다. 생각을 온전히 비울 수 있는.
근데 욕심이 생기고 나서부터 빵 포장하면서 이런 거 만들어 볼까 생각을 했던 거 같다.

그래서 다음으로 생각한 게 바로 샌드위치 스티커 기능이다.
이게 영업 비밀인가? 조심스럽기는 하지만 샌드위치 스티커 색상은 주황색, 녹색, 흰색으로 폐기할 샌드위치를 알기 위해서 스티커 색상을 구분한다.
근데 오늘 녹색이면 내일 주황색이고 이렇게 나름 규칙이 있는데, 이걸 직접 네임펜으로 적는다.
날마다 네임펜으로 적고 아세톤으로 지우고 이 작업을 한다.
문제는 잘못 체크한 날이다. 
그러면 스티커 붙인 거 안 찢어지게 조심히 다시 떼거나, 다시 떼기 그럴 정도로 이미 작업을 많이 진행했으면 다른 표시를 더해서 알아볼 수 있게 한다.
이렇게 되면 샌드위치 폐기 구분할 때 귀찮아진다. 이걸 내가 해서 너무 귀찮았다.
그래서 샌드위치 스티커 기능을 구현해서 자동으로 샌드위치 스티커 색상을 알려주게 했다. 또 자동 채우기, 자동 지우기 기능을 넣어서 자동으로 스티커 색상을 다 채우고 지우고도 가능하게 했다.

이 정도면 만족스럽다하고 지내다가. 한 번 손님한테 크게 사과한 적이 있다.
손님이 '예약 찾으러 왔어요'라고 말씀하셨는데, 나는 예약 관련해서 아는게 없으면 진짜 등골이 서늘하다는 말이 공감된다.
그리고 예약은 거의 큰 주문 건이다. 케이크나 빵 대량 주문이기 때문에 더 민감할 수밖에 없다.
포스기에 예약 전표 뽑는게 있어도, 이걸 벽에 다 붙여두니까 다른 전달사항과 섞여서 놓치는 경우가 발생한다.
그리고 이게 카운터를 맡는 아르바이트생과 주방 기사님들과 sync가 맞아야 하는 일이기도 하다.
주문을 받는다고 끝난 게 아니라 기사님들에게 예약이 들어와서 케이트 혹은 빵 생산을 해야한다고 전달드려야 한다.
주문 누락 아니면 전달 오류가 발생하면, 고스란히 손님이 예약 찾으러 왔는데 준비가 안 되어 있는 혼란의 사태가 벌어지는거다.

그때도 케이크 찾으러 오신 손님 분이었는데, 케이크가 없어서 엄청 사과드린 적이 있다.
이건 시스템의 문제라고 생각했다. 벽에 여러 장의 종이가 붙여있으니까 제대로 파악하기 힘들고 시스템을 통해서 개선해야한다고 생각했다.
그래서 예약 기능을 만들었다.

마지막으로 우리는 아르바이트 근무기록을 사장님이 프린트해주신 프린트물에 수기로 기록한다.
문제는 사장님이 바쁘셔서 제 때 프린트물을 가져다 주시지 않는다.
그러면 기다렸다가 몰아서 써야 하는 일이 발생한다.
그리고 아르바이트 내내 힘들게 일하다가 그래도 근무 기록 쓰면 월급 받을 생각에 행복해진다.
그래서 근무기록 기능을 만들었다.
아직 구현은 안 했지만 근무 기록 작성을 하면 화려한 인터랙션으로 받을 월급을 보여주는 걸 상상하고 있다.

아무튼 이렇게 내가 진짜 필요해서 하나씩 늘려갔던 거 같다.

### 리팩토링
https://github.com/najakgil/najakgil-client
프로젝트를 했을 때는 정말 여러 번 뒤엎었다.
예를 들어서 recoil을 쓰다가 recoil의 메모리 누수 문제 등 이슈가 발생하자 사용을 안 했다.
그리고 react.js에서 next.js로 바꾸고 이렇게 기술 스택을 바꿀 때마다 새 도화지처럼 프로젝트를 밀고 세팅부터 다시 했다.
그러다보니까 어찌보면 힘든 일일수도 있지만, 그래도 꼬일 일은 없어서 편했다.

그런데 행뚜는 다른 문제였다.
내가 이 사이트 운영에 차질이 생기게 하면 그 주 냉판은 내가 닦아야 했다.
그래서 절대 사이트가 안 돌아가지 않도록 각별히 주의를 기울어야 했다.

뒤엎고 이런 걸 하기보다는 점진적으로 운영에는 차질이 되지 않도록 신경을 썼다.
명확한 기준을 가지고 개선을 진행하지는 않았다.
운영에 차질이 가지 않을 수준으로만 계속 조금씩 해왔다.

그러다보니까 실제 회사에서는 어떻게 하고 있을까 궁금했다.
내 서비스보다 규모도 훨씬 크고 엮여 있는게 많을텐데 어떻게 리팩토링을 어떤 기준을 가지고 진행할 지 궁금했다.
그래서 지금은 약간 야매 느낌으로 했지만, 앞으로 이 부분 관련해서 나만의 철학을 세워야겠다고 느꼈다.

### 이차원 배열 vs 객체
내가 그때 코테 문제를 풀면서 이차원 배열이 뭔가 해당 데이터를 위치를 찾기 힘들 때, 딱! 바로 찾아갈 수 있게 하는 아주 기발한 친구라고 생각했다.
그래서 샌드위치 스티커 기능을 구현할 때 이차원 배열을 사용했다.
그런데 이게 되게 헷갈렸다.
그러다가 내가 내 코드를 다른 사람한테 설명한 적이 있었는데, 설명하니까 나도 헷갈리고 상대도 이해를 못 했다.
그래서 이차원 배열보다는 객체를 사용하는 것이 정보 관리도 더 편하고 가독성도 좋다고 느꼈다.

### API 계층 분리
처음에는 client 코드에서 다 supabase를 불러왔다.
그러다보니까 코드가 엄청 길어지고 내가 읽기 힘들었다.
그래서 분리를 했다.
백엔드와 할 때처럼 api 코드를 분리해서 했더니 가독성이 좋아졌다.

### 드롭다운
https://github.com/anonymousRecords/touslesjours-admin/issues/2
이게 사실 초기에 내가 제일 골머리 앓았던 이슈이다.

## 📌 shader-gradient 리드미 개선
https://www.youtube.com/watch?v=CSChpoiRTIY

첫 회의를 했다!!!
내가 진짜 shader-gradient 코드 보면서 궁금했던 점들, 지난 커피챗에서 들었던 이야기와 더불어서 이어서 더 들었다.

(1) with store vs without store
(2) src, src-dev 제거

